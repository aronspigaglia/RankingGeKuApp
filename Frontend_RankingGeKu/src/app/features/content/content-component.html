<div class="app-content px-3 py-3">
  @if (!imported) {
    <div class="alert alert-info">
      Zuerst Athleten-CSV importieren.
    </div>
  } @else {

    <!-- Tabs D1..D6 -->
    <ul class="nav nav-tabs mb-4">
      @for (tab of tabs; let i = $index; track i) {
        <li class="nav-item">
          <button class="nav-link" [class.active]="i === activeTabIndex" (click)="setActive(i)">
            {{ tab }}
          </button>
        </li>
      }
    </ul>

    <!-- 3×2 grid of sheets; each sheet == one group -->
    <div class="sheet-grid">
      @for (group of groups; let g = $index; track g) {
        <div class="sheet-box">
          <h5 class="fw-semibold mb-3">
            Gruppe {{ g + 1 }} – {{ getApparatusName(g) }}
          </h5>
          <div class="table-responsive">
            <table class="table table-sm align-middle mb-0">
              <thead class="table-light">
                <tr>
                  <th>Name</th>
                  <th>JG</th>
                  <th>Verein</th>
                  <th>Kat</th>
                  <th class="text-end">D-Note</th>
                  <th class="text-end">END-Note</th>
                </tr>
              </thead>
              <tbody>
                @for (a of group; let ai = $index; track ai) {
                  <tr>
                    <td>{{ a.nachname }} {{ a.vorname }}</td>
                    <td>{{ a.jg }}</td>
                    <td>{{ a.verein }}</td>
                    <td>{{ a.kat }}</td>
                    <td class="text-end">
                        <input
                            type="text"
                            inputmode="decimal"
                            class="form-control form-control-sm no-spinners text-end"
                            [(ngModel)]="a.notes[activeTabIndex].dNote"
                            (ngModelChange)="state.saveSnapshot()"
                            placeholder="–" />
                    </td>
                    <td class="text-end">
                        <input
                            type="text"
                            inputmode="decimal"
                            class="form-control form-control-sm no-spinners text-end"
                            [(ngModel)]="a.notes[activeTabIndex].endNote"
                            (ngModelChange)="state.saveSnapshot()"
                            placeholder="–" />
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      }
    </div>
  }
</div>
